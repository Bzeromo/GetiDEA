# 백엔드 시나리오

### 1. 백엔드 서버 open

### 2. 프론트 서버 open

### 3. 사용자 프론트 포트로 접속

### 4. 프론트에서 로그인 여부 확인

### 5. 로그인
- 로그인 정보 남아있을 경우 메인 화면(6)으로 이동
- 로그인 안되어있을 경우 로그인 화면으로 이동
- DB에 회원 정보가 없을경우 DB에 정보를저장해주며 회원 가입 진행 (이메일, 프로필 사진 링크 등)
- 회원 정보가 있을경우 이미 등록된 회원
->쿠키 or 세션에 사용자 정보 저장

### 6. 메인 화면으로 리디렉션

### 7. DB에서 회원에 대한 폴더, 프로젝트 정보를 불러와서 메인 페이지에 표시 

### 8. 프로젝트 생성 수행

### 9. MongoDB에서 템플릿에 대한 썸네일, 업데이트 날짜, 이름 등을 불러프로젝트 생성 모달에 표시

### 10. 특정 템플릿 선택시 MongoDB에서 템플릿 ID를 키값으로 접근하여 프로젝트 화면에 children 정보를 보여줌

### 11. MongoDB에 템플릿의 children 정보를 가져와 프로젝트 컬렉션을 생성하고 정보를 넣어줌

### 12. 팀원 초대
- 이메일을 통해 팀원 검색
- DB에 검색 내용과 일치하는 회원이 있는지 확인
- 이메일이 존재할 경우 MySQL location 테이블과 MongoDB Project 컬렉션에 추가된 참여자의 정보를 입력
- 초대된 팀원에게 소켓 메시지를 통해 알림 전송 
- 초대된 팀원이 프로젝트에 접근
- MongoDB의 프로젝트 컬렉션에서 정보를 가져와 화면에 표시

### 13. 작업 수행
- 사용자가 작업을 수행시 내용을 소켓에 전달
- 소켓에서 다른 팀원들에게 작업 내용을 전달
- 전달받은 내용을 화면에 반영
- 소켓에서 Redis 서버쪽으로 정보를 전달
- Redis에서 작업내용을 각 사용자 별로 저장 (수정 전/수정 후 형식)

### 14. MongoDB에 저장
- Redis의 사용자의 작업 정보가 일정량에 도달하면 같은 프로젝트를 진행하는 사용자의 작업 정보의 80% 정도MongoDB 서버로 이동 
- 특정 사용자의 접속이 종료됨 => 동일한 방식으로 작업 저장 후
사용자에 대한 메시지큐 삭제

### 15. 팀원간 채팅 
- 사용자가 채팅을 입력시 소켓 서버로 메시지 전송
- 소켓 서버에서 같은 프로젝트에 들어와있는 참여자들에게 메시지 전송

### 16. 화상 채팅
- 사용자가 화상 채팅을 사용할 경우 소켓에서 같은 프로젝트에 있는 팀원들을 사용자에게 전달
- WebRTC를 활용하여 1:N 화상채팅 연결 (발표자 1, 청자 N)

### 17. 화면 공유
- 화상 채팅과 동일한 방법으로 화면 공유