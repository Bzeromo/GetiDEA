# 작업물 저장 방식 회의

## 사용 DB
- MySQL : 사용자 정보, 프로젝트 참여자 정보, 프로젝트 정보 저장
- MongoDB : 프로젝트 내용 저장 (각 컨텐츠 별 위치, 상태 등)
- Redis : 작업중 프로젝트의 변경 사항 저장

## 처리 방식
1. 사용자 A, B, C 가 있을 경우 서로의 작업을 소켓을 통해 전송<br>
소켓 메시지는 작업자, 작업 시간, 이전 상태, 이후 상태 형식
2. 소켓에 전송한 내용을 다른 사용자들에게 전달함으로 다른 사용자의 화면에도 반영 <br>
3. 사용자들에게 전송 후 백엔드 서버측으로 전송
4. 전송받은 내용을 Redis 서버에 각자의 WorkingDeque 에 저장 <br>
4-1. 사용자가 되돌리기 작업을 수행할 경우 가장 마지막에 들어온 내용을 
소켓에 전송후 사용자들의 화면에 적용 <br>
4-2. 사용자들의 WorkingDeque의 합이 일정 수치를 넘어갈 경우 
큐의 80% 정도를 시간 순서에 따라 merge 작업 수행 <br>
4-3. merge된 내용을 MongoDB에 저장 <br>

## 예외 사항 
- 사용자가 중간에 나간 경우
- 되돌리기 작업할 작업물이 삭제된 경우 

